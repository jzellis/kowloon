"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _constant = require("../../constant");
var _default = function _default(o, c, d) {
  var proto = c.prototype;
  proto.week = function (week) {
    if (week === void 0) {
      week = null;
    }
    if (week !== null) {
      return this.add((week - this.week()) * 7, _constant.D);
    }
    var yearStart = this.$locale().yearStart || 1;
    if (this.month() === 11 && this.date() > 25) {
      // d(this) is for badMutable
      var nextYearStartDay = d(this).startOf(_constant.Y).add(1, _constant.Y).date(yearStart);
      var thisEndOfWeek = d(this).endOf(_constant.W);
      if (nextYearStartDay.isBefore(thisEndOfWeek)) {
        return 1;
      }
    }
    var yearStartDay = d(this).startOf(_constant.Y).date(yearStart);
    var yearStartWeek = yearStartDay.startOf(_constant.W).subtract(1, _constant.MS);
    var diffInWeek = this.diff(yearStartWeek, _constant.W, true);
    if (diffInWeek < 0) {
      return d(this).startOf('week').week();
    }
    return Math.ceil(diffInWeek);
  };
  proto.weeks = function (week) {
    if (week === void 0) {
      week = null;
    }
    return this.week(week);
  };
};
exports["default"] = _default;